//>>built
var __extends=this&&this.__extends||function(){var h=function(f,g){h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])};return h(f,g)};return function(f,g){function a(){this.constructor=f}h(f,g);f.prototype=null===g?Object.create(g):(a.prototype=g.prototype,new a)}}(),__decorate=this&&this.__decorate||function(h,f,g,a){var e=arguments.length,k=3>e?f:null===a?a=Object.getOwnPropertyDescriptor(f,g):a,m;
if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(h,f,g,a);else for(var n=h.length-1;0<=n;n--)if(m=h[n])k=(3>e?m(k):3<e?m(f,g,k):m(f,g))||k;return 3<e&&k&&Object.defineProperty(f,g,k),k};
define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/widgets/support/widget esri/core/Accessor esri/core/watchUtils dojo/_base/array dojo/dom-attr dojo/on dstore/Memory esri/core/accessorSupport/decorators".split(" "),function(h,f,g,a,e,k,m,n,q,p,r,c){Object.defineProperty(f,"__esModule",{value:!0});h=function(f){function b(d){d=f.call(this,d)||this;d.store3d=new r({data:[]});d.store2d=new r({data:[]});m.whenOnce(d,"view").then(d.onload.bind(d));
return d}g(b,f);b.prototype.onload=function(){};b.prototype.row_hover_funct=function(d,a){d=q.get(d.currentTarget,"data-layername").toLowerCase().replace(" ","_");d=this.scene.findLayerById(d);d.definitionExpression="OBJECTID \x3d "+a;this.setSingleLayerVisible(d)};b.prototype.build3dTableConnections=function(d,a){var b=this;console.log(a);"hover"===this.displayMode?(this.tableLeaveEvt||(this.tableLeaveEvt=p(d,"mouseleave",function(a){b.getDefaultLayerVisibility()})),a.forEach(function(l){var c=l[0];
l=p(l[1],"mouseenter",function(a){var d=a.target.id.split("_")[0];b.row_hover_funct(a,d)});b.rowHoverEvts?b.rowHoverEvts.push(l):b.set("rowHoverEvts",[l]);p(c,"click",function(l){l.target.checked?(b.set("display_mode","toggle"),b.build3dTableConnections(d,a)):n.some(a,function(a){if(a[0].checked)return!0})||(b.set("display_mode","hover"),b.build3dTableConnections(d,a))})})):"toggle"===this.displayMode&&(this.tableLeaveEvt&&(this.tableLeaveEvt.remove(),this.tableLeaveEvt=void 0),this.rowHoverEvts.forEach(function(a){a.remove()}),
this.rowHoverEvts=[])};b.prototype.setSingleLayerVisible=function(a){var b=this.scene.findLayerById("part_77_group"),d=this.scene.findLayerById("critical_3d");a.visible=!0;d.layers.forEach(function(b){b.id!==a.id&&(b.visible=!1)});b.layers.forEach(function(b){b.id!==a.id&&(b.visible=!1)})};b.prototype.highlight2DRow=function(a,b,c){a=q.get(a.currentTarget,"data-layername").toLowerCase().replace(" ","_");a=this.scene.findLayerById(a);var d=c;this.view.whenLayerView(a).then(function(a){d&&d.remove();
d=a.highlight(Number(b.oid))});return d};b.prototype.create3DArray=function(a,b,c){a=a.map(function(a){var d=a.attributes.Elev,e,f;e=Number((d-b).toFixed(1));f=Number((e-c).toFixed(1));return{oid:a.attributes.OBJECTID,name:a.attributes.layerName,type:a.attributes["OIS Surface Type"],condition:a.attributes["OIS Surface Condition"],runway:a.attributes["Runway Designator"],elevation:d,height:e,clearance:f,guidance:a.attributes["Approach Guidance"],date_acquired:a.attributes["Date Data Acquired"],description:a.attributes.Description,
regulation:a.attributes["Safety Regulation"],zone_use:a.attributes["Zone Use"]}}).slice(0);a.sort(function(a,b){return a.clearance<b.clearance?1:a.clearance>b.clearance?-1:0});this.store3d.setData(a);return a};b.prototype.create2DArray=function(a){a=a.map(function(a){return{oid:a.attributes.OBJECTID,layerName:a.attributes.layerName,name:a.attributes.Name,description:a.attributes.Description,date_acquired:a.attributes["Date Data Acquired"],data_source:a.attributes["Data Source"],last_update:a.attributes["Last Update"]}}).slice(0);
a.sort(function(a,b){return a.name<b.name?1:a.name>b.name?-1:0});this.store2d.setData(a);return a};b.prototype.getDefaultLayerVisibility=function(){var a=this;this.layerVisibility.forEach(function(b){var c=a.scene.findLayerById(b.id);c.visible=b.def_visible;c.definitionExpression=b.def_exp})};a([e.renderable(),c.property()],b.prototype,"name",void 0);a([e.renderable(),c.property()],b.prototype,"x",void 0);a([e.renderable(),c.property()],b.prototype,"y",void 0);a([e.renderable(),c.property()],b.prototype,
"msl",void 0);a([e.renderable(),c.property()],b.prototype,"agl",void 0);a([e.renderable(),c.property()],b.prototype,"groundElevation",void 0);a([e.renderable(),c.property()],b.prototype,"dem_source",void 0);a([e.renderable(),c.property()],b.prototype,"layerResults3d",void 0);a([e.renderable(),c.property()],b.prototype,"layerResults2d",void 0);a([e.renderable(),c.property()],b.prototype,"count_3d",void 0);a([e.renderable(),c.property()],b.prototype,"count_2d",void 0);a([e.renderable(),c.property()],
b.prototype,"results3d_grid",void 0);a([e.renderable(),c.property()],b.prototype,"results2d_grid",void 0);a([e.renderable(),c.property()],b.prototype,"meta3d",void 0);a([e.renderable(),c.property()],b.prototype,"meta2d",void 0);a([c.property()],b.prototype,"modifiedBase",void 0);a([c.property()],b.prototype,"scene",void 0);a([c.property()],b.prototype,"view",void 0);a([c.property()],b.prototype,"displayMode",void 0);a([c.property()],b.prototype,"layerVisibility",void 0);a([c.property()],b.prototype,
"rowHoverEvts",void 0);a([c.property()],b.prototype,"tableLeaveEvt",void 0);a([c.property()],b.prototype,"expand",void 0);a([c.property()],b.prototype,"store3d",void 0);a([c.property()],b.prototype,"store2d",void 0);return b=a([c.subclass("widgets.App.ObstructionViewModel")],b)}(c.declared(k));f.default=h});